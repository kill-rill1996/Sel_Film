{% extends 'index.html' %}
{% load to_int %}
{% load static %}

{% block title %}Films list{% endblock title %}

{% block content %}
<!-- page title -->
<section class="section section--first section--bg" data-bg="{% static 'img/section/section.jpeg' %}">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="section__wrap">
					<!-- section title -->
					<h1 class="section__title">–°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤</h1>
					<!-- end section title -->

					<!-- breadcrumb -->
					<ul class="breadcrumb">
						<li class="breadcrumb__item"><a href="{% url 'index-page' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
						<li class="breadcrumb__item breadcrumb__item--active">–°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤</li>
					</ul>
					<!-- end breadcrumb -->
				</div>
			</div>
		</div>
	</div>
</section>
<!-- end page title -->

<!-- filter -->
<div class="filter">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="filter__content">
					<div class="filter__items">
						<!-- filter item -->
						<div class="filter__item" id="filter__genre">
							<span class="filter__item-label">–ñ–ê–ù–†:</span>

							<div class="filter__item-btn dropdown-toggle" role="navigation" id="filter-genre" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<input type="button" value="–ö–æ–º–µ–¥–∏—è/–î—Ä–∞–º–∞">
								<span></span>
							</div>

							<ul class="filter__item-menu dropdown-menu scrollbar-dropdown" aria-labelledby="filter-genre">
								{% for genre in genres %}
								<li>{{ genre }}</li>
								{% endfor %}
							</ul>
						</div>
						<!-- end filter item -->

						<!-- filter item -->
						<div class="filter__item" id="filter__quality">
							<span class="filter__item-label">–°–¢–†–ê–ù–ê:</span>

							<div class="filter__item-btn dropdown-toggle" role="navigation" id="filter-quality" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<input type="button" value="–†–æ—Å—Å–∏—è">
								<span></span>
							</div>

							<ul class="filter__item-menu dropdown-menu scrollbar-dropdown" aria-labelledby="filter-quality">
								{% for country in countries %}
								<li>{{ country }}</li>
								{% endfor %}
							</ul>
						</div>
						<!-- end filter item -->

						<!-- filter item -->
						<div class="filter__item" id="filter__rate">
							<span class="filter__item-label">IMBd:</span>

							<div class="filter__item-btn dropdown-toggle" role="button" id="filter-rate" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<div class="filter__range">
									<div id="filter__imbd-start"></div>
									<div id="filter__imbd-end"></div>
								</div>
								<span></span>
							</div>

							<div class="filter__item-menu filter__item-menu--range dropdown-menu" aria-labelledby="filter-rate">
								<div id="filter__imbd"></div>
							</div>
						</div>
						<!-- end filter item -->

						<!-- filter item -->
						<div class="filter__item" id="filter__year">
							<span class="filter__item-label">–ì–û–î –í–´–ü–£–°–ö–ê:</span>

							<div class="filter__item-btn dropdown-toggle" role="button" id="filter-year" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<div class="filter__range">
									<div id="filter__years-start"></div>
									<div id="filter__years-end"></div>
								</div>
								<span></span>
							</div>

							<div class="filter__item-menu filter__item-menu--range dropdown-menu" aria-labelledby="filter-year">
								<div id="filter__years"></div>
							</div>
						</div>
						<!-- end filter item -->
					</div>
					
					<!-- filter btn -->
					<button class="filter__btn" type="button">–ø—Ä–∏–º–µ–Ω–∏—Ç—å</button>
					<!-- end filter btn -->
				</div>
			</div>
		</div>
	</div>
</div>
<!-- end filter -->

<!-- catalog -->
<div class="catalog">
	<div class="container">
		<div class="row row--grid">
			{% for film in films %}
			<!-- card -->
			<div class="col-6 col-sm-12 col-lg-6">
				<div class="card card--list">
					<a href="{{ film.get_absolute_url }}" class="card__cover">
						<img src="{{ film.image.url }}" alt="">
						<span class="card__play">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.54,9,8.88,3.46a3.42,3.42,0,0,0-5.13,3V17.58A3.42,3.42,0,0,0,7.17,21a3.43,3.43,0,0,0,1.71-.46L18.54,15a3.42,3.42,0,0,0,0-5.92Zm-1,4.19L7.88,18.81a1.44,1.44,0,0,1-1.42,0,1.42,1.42,0,0,1-.71-1.23V6.42a1.42,1.42,0,0,1,.71-1.23A1.51,1.51,0,0,1,7.17,5a1.54,1.54,0,0,1,.71.19l9.66,5.58a1.42,1.42,0,0,1,0,2.46Z"/></svg>
						</span>
					</a>

					<div class="card__content">
						<h3 class="card__title"><a href="{{ film.get_absolute_url }}">{{ film.title_ru|capfirst }}</a></h3>
						<span class="card__category">
							{% for genre in film.genres.all %}
							<a>{{ genre }}</a>
							{% endfor %}
						</span>

						<div class="card__wrap">
							<span class="card__rate"> {{ film.rating }}</span>

							<ul class="card__list">
								<li>{{ film.year }}</li>
								{% if film.rating|to_int >= 80 %}<li>üå∂</li>{% endif %}
							</ul>
						</div>

						<div class="card__description">
							<p>{{ film.plot }}</p>
						</div>
					</div>
				</div>
			</div>
			<!-- end card -->
			{% endfor %}
		</div>

		<div class="row">
			<!-- paginator -->
			{% include 'includes/paginator.html' %}
			<!-- end paginator -->
		</div>
	</div>
</div>
<!-- end catalog -->

<!-- recommended_films -->
<section class="section section--bg" data-bg="{% static 'img/section/section.jpeg' %}">
	<div class="container">
		<div class="row">
			<!-- section title -->
			<div class="col-12">
				<h2 class="section__title">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç SelFilm</h2>
			</div>
			<!-- end section title -->
		</div>

		<div class="row row--grid">
			{% for film in recommended_films %}
			<!-- card -->
			<div class="col-6 col-sm-4 col-lg-3 col-xl-2">
				<div class="card">
					<a href="{{ film.get_absolute_url }}" class="card__cover">
						<img src="{{ film.image.url }}" alt="">
						<span class="card__play">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.54,9,8.88,3.46a3.42,3.42,0,0,0-5.13,3V17.58A3.42,3.42,0,0,0,7.17,21a3.43,3.43,0,0,0,1.71-.46L18.54,15a3.42,3.42,0,0,0,0-5.92Zm-1,4.19L7.88,18.81a1.44,1.44,0,0,1-1.42,0,1.42,1.42,0,0,1-.71-1.23V6.42a1.42,1.42,0,0,1,.71-1.23A1.51,1.51,0,0,1,7.17,5a1.54,1.54,0,0,1,.71.19l9.66,5.58a1.42,1.42,0,0,1,0,2.46Z"/></svg>
						</span>
					</a>
					<div class="card__content">
						<h3 class="card__title"><a href="{{ film.get_absolute_url }}">{{ film.title_ru|capfirst }}</a></h3>
						<span class="card__category">
							<a>{{ film.genres.all|first }}</a>
						</span>
						<span class="card__rate">{{ film.rating }}</span>
					</div>
				</div>
			</div>
			<!-- end card -->
			{% endfor %}
		</div>
	</div>
</section>
<!-- end recommended_films -->
{% endblock content %}

